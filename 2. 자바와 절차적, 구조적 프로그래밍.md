# 자바와 절차적/구조적 프로그래밍

자바는 객체 지향 언어이면서 프로그래밍 언어다.<br/>
프로그래밍 언어로서의 자바를 살펴본다.<br/>
변수가 메모리에 어떻게 저장되고 사용되는지, 메서드가 어떻게 호출되고 메모리에 어떤 변화를 일으키는지 살펴보자.
<hr/>

### 자바 프로그램의 개발과 구동
* 현실 세계에서 컴퓨터를 구동하기 위해서는 물리적 컴퓨터인 하드웨어와 운영체제, 그리고 그 위에서 구동될 소프트웨어가 필요하며 여기에 더해 소프트웨어를
개발할 수 있는 개발 도구가 필요하다.<br/>
* 자바의 가상 세계는 이러한 현실 세계를 그대로 모방하고 있다.<br/>

JDK(Java Development Kit) - 자바 개발 도구<br/>
JRE(Java Runtime Environment) - 자바 실행 환경<br/>
JVM(Java Virtual Machine) - 자바 가상 기계<br/>

| 코드 실행 영역 | 데이터 저장 영역 | 
|--------|--------|

- 프로그램이 메모리를 사용하는 방식

|       스태틱(Static) 영역-클래스들의 놀이터       |
|--------|

| 스택(Stack) 영역-메서드들의 놀이터 | 힙(Heap) 영역-객체들의 놀이터 |
|-------|----------|

- 객체 지향 프로그램의 메모리에서 데이터 저장 영역을 위와 같이 사용한다. (T메모리 구조라고 부름)
<hr/>

### main() 메서드: 메서드 스택 프레임
main() 메서드가 실행될 때 T 메모리의 변화

1. 프로그램이 실행되면 JRE는 먼저 프로그램 안에 main() 메서드가 있는지 확인한다. 존재가 확인되면 프로그램 실행을 위한 준비를 한다. JVM에 전원을 넣어 부팅하는 것.
2. 부팅된 JVM은 목적 파일을 받아 그 목적 파일을 실행한다.
  * java.lang 패키지를 T 메모리의 스태틱 영역에 배치.
  * import된 패키지를 T 메모리의 스태틱 영역에 배치.
  * 프로그램 상의 모든 클래스를 T 메모리의 스태틱 영역에 배치.
3. 메서드의 여는 중괄호를 만날 때마다 스택프레임이 하나씩 생긴다. (main()스택 프레임이 스택 영역에 할당)
4. 메서드 (인자들)의 변수 공간을 할당. (메서드의 인자 args를 저장할 변수 공간을 스택 프레임의 맨 밑에 확보)
5. 메서드의 닫는 중괄호를 만나면 해당 메서드 스택 프레임이 소멸된다.
6. main() 메서드가 끝나면 T메모리 소멸, JRE는 JVM을 종료, JRE가 사용했던 시스템 자원을 운영체제에 반납. 
<hr/>

### 블록 구문과 메모리: 블록 스택 프레임
1. 해당 메서드 스택 프레임 안에 블록 구문의 블록 스택 프레임이 중첩되어 생성됨.
2. 블록 구문 안의 변수 공간을 할당.
3. 블록을 종료하는 닫는 중괄호를 만나면 해당 블록 스택 프레임은 스택 영역에서 사라짐. 이 때 해당 블록 스택 프레임 안에 상주하던 변수의 저장 공간도 사라짐.
  * 블록 스택 프레임이 사라진 뒤 해당 블록 스택 프레임에 상주하던 변수를 사용하면 컴파일러가 오류라며 컴파일을 거부함.
<hr/>

### 메서드 호출과 메모리: 메서드 스택 프레임 2
1. 메서드 호출이 일어나면 무조건 호출되는 메서드의 스택 프레임이 T메모리 스택 영역에 새로 생성됨.
  1. 호출된 메서드 스택 프레임에 반환값을 저장할 변수 공간이 맨 아래 자리잡음.
  2. 인자를 저장할 변수 공간이 그다음 위에 자리 잡음.
  3. 메서드의 지역 변수가 자리 잡음.
2. 메서드의 끝을 알리는 닫는 중괄호를 만나면 메서드 스택 프레임은 스택에서 사라진다. (반환값이 있을 경우 그 값을 돌려주면서 스택에서 사라짐)

> 각 메서드 스택 프레임은 서로 다른 메서드 스택 프레임의 내부 변수는 접근 불가.(인자 리스트 와 반환값에 의해서만 값이 전달-Call By Value)
<hr/>

### 전역 변수와 메모리
메서드 밖에서 선언된 변수는 메서드들 사이에서 공유해서 사용할 수 있는 전역변수가 된다. 이는 해당 클래스가 T 메모리 스태틱 영역에 배치될 때 그 안에 변수가 클래스의 멤버로 공간을 만들어 저장된다.

두 가지 변수 유형 - 지역 변수와 전역 변수
  * 스택 프레임에 종속적인 지역 변수<br/>
  * 스택 프레임에 독립적인 전역 변수

> 전역 변수는 코드 어느 곳에서나 접근할 수 있다. 여러 메서드들이 공유해서 사용하니 그 값을 파악하기 쉽지 않아 사용을 삼가는 것이 좋다.<br/>
> 전역 변수는 피할 수 있다면 피하라.(다만 읽기 전용으로 값을 공유해서 전역 상수로 쓰는 것은 좋다)
<hr/>

### 멀티 스레드 / 멀티 프로세스의 이해
* 멀티 스레드의 T 메모리 모델은 스택 영역을 스레드 개수만큼 분할해서 쓰는 것이다.
* 멀티 프로세스는 다수의 데이터 저장 영역, 즉 다수의 T 메모리를 갖는 구조다.

> 멀티 프로세스는 각 프로세스마다 각자의 T 메모리가 있고 각자 고유의 공간이므로 서로 참조할 수 없다.<br/>
> 그에 반해 멀티 스레드는 하나의 T 메모리만 사용하는데 스택 영역만 분할해서 사용하는 구조다.
> 따라서 스레드가 멀티 프로세스 대비 메모리를 적게 사용할 수 있는 구조다.
<hr/>

### 스태틱: 클래스의 놀이터
### 스택: 메서드의 놀이터
### 힙: 객체의 놀이터
